/*
 * Noder-js 1.3.0 - 23 Apr 2014
 * https://github.com/ariatemplates/noder-js
 * Copyright 2009-2014 Amadeus s.a.s.
 * Licensed under the Apache License, Version 2.0.
 */
(function(e,n,t){"use strict";var r,i,o,u,a,s,c,l,f,d,h,v,p,m,g,y,x,j,w,M,S,E,b,A,R,P;return function(){var e=Object.prototype.toString,n=function(n){return"string"==typeof n||"[object String]"===e.call(n)},t=Array.isArray||function(n){return"[object Array]"===e.call(n)},i=function(e){return"function"==typeof e},o=function(n){return n?"[object Object]"===e.call(n):!1};r={isFunction:i,isArray:t,isString:n,isPlainObject:o}}(),function(){var n=e.setTimeout;i=function(e){n(e,0)}}(),o=function(e){i(function(){throw e.logDetails&&e.logDetails(),e})},function(){var e=[],n=!1,t=function(e,n,t){for(;e.length>0;){var r=e.shift();try{r.apply(t,n)}catch(i){o(i)}}},r=function(){n=!0;try{t(e,[])}finally{n=!1}},a=function(t){0!==e.length||n||i(r),e.push(t)};u={syncTick:r,nextTick:a,nextTickApply:function(e,n,r){e&&e.length>0&&a(function(){t(e,n,r)})},syncApply:t}}(),function(){var e=r.isFunction,n=Array.prototype.concat,t=function(){},i=function(n,t,r){if(n){var i=n.thenSync||n.then;if(e(i))return i.call(n,t,r),void 0}t(n)},s=function(e,n){return function(){try{var t=e.apply(null,arguments);i(t,n.resolve,n.reject)}catch(r){n.reject(r)}finally{e=null,n=null}}},c=function(){},l=function(){var n,t={},r=t.promise=new c,i=null,o={resolve:[],reject:[]},a=function(t,u){r["then"+t]=function(t,r){var a=l();return t=e(t)?s(t,a):a.resolve,r=e(r)?s(r,a):a.reject,o?(o.resolve.push(t),o.reject.push(r)):u(["resolve"==n?t:r],i),a.promise}};a("",u.nextTickApply),a("Sync",u.syncApply);var f=function(e){return t[e]=function(){if(o){i=arguments,n=e;var t=o[e];o=null,u.nextTickApply(t,i)}},function(){return n==e}};return r.isResolved=f("resolve"),r.isRejected=f("reject"),r.result=function(){return i&&i[0]},t};c.prototype={end:function(){return this.thenSync(t,o)},always:function(e){return this.then(e,e),this}};var f=l();f.resolve(),f=f.promise;var d=function(e,n){return function(t){return function(r){if(e){if(e[3]&&(t?e[2][n]=r:(e[3]=!1,e[2]=arguments,e[4]&&(e[1]=1))),e[1]--,!e[1]){var i=e[0],o=e[2];e[0]=e[2]=null,(e[3]?i.resolve:i.reject).apply(i,o)}e=null}}}},h=function(e){return function(){var t=n.apply([],arguments);if(!t.length)return f;for(var r=l(),o=[r,t.length,t,!0,e],u=0,a=t.length;a>u;u++){var s=d(o,u);i(t[u],s(!0),s(!1))}return r.promise}};a={defer:l,when:h(!0),whenAll:h(!1),empty:t,done:f}}(),s=t,function(){var e,n=0,t=function(){var e=!1,n=this,t=r().thenSync(function(t){return t.call(n,e)});return e=!0,t},r=function(){if(!e){var n=s().errorContext,t=new E(n);e=t.moduleExecute(t.getModule(n.main))}return e},i=function(e,r,i){var o=++n,u=Error("NoderError #"+o+": "+e);return u.name="NoderError",u.id=o,u.code=e,u.args=r,u.cause=i,u.logDetails=t,u};c=i}(),function(){var n,t=e.XMLHttpRequest;t?n=function(){return new t}:(t=e.ActiveXObject,n=function(){return new t("Microsoft.XMLHTTP")});var r=function(e,n,t){return function(){if(n&&4==n.readyState){var r=200!=n.status;return r?t.reject(c("XMLHttpRequest",[e,n])):t.resolve(n.responseText,n),e=n=t=null,!0}}};l=function(e,t){t=t||{};var i=a.defer(),o=n(),u=t.headers||{};o.open(t.method||"GET",e,!t.sync);for(var s in u)u.hasOwnProperty(s)&&o.setRequestHeader(s,u[s]);o.send(t.data);var c=r(e,o,i);return c()||(o.onreadystatechange=c),i.promise}}(),f=function(e,t){var r={};return e=t?["/*\n * File: ",t,"\n */\narguments[1].res=",e,"\n//# sourceURL=",t].join(""):"arguments[1].res="+e,n(e,r),r.res},d=function(e,n,t){try{return f(e,n)}catch(r){throw c("jsEval",[e,n,t],r)}},function(){var e=r.isPlainObject;h=function(n,t,r){if(!n)return r;r=n["**"]||r;for(var i=0,o=t.length;o>i;i++){var u=t[i],a=n[u];if(!a)return n["*"]||n["**"]||r;if(!e(a))return a;r=n["**"]||r,n=a}return n["."]||n["*"]||n["**"]||r}}(),function(){var e=function(e){return e.length?e.split("/"):[]},n=function(n){var t=e(n);return t.pop(),t.join("/")};v={split:e,dirname:n}}(),function(){var n=e.document||{},t=function(){if("loading"==n.readyState||"interactive"==n.readyState){var e=n.getElementsByTagName("script");return e[e.length-1]}};p=n.currentScript||t()||{}}(),m=function(){var e=p.src;return e?v.dirname(e.replace(/\?.*$/,""))+"/":""},g=function(e,n,t,r){var i=(n||[]).slice(0),o=function(n){if(r[0]=n,!i.length)return a.when(n);var u=i.shift();return u.pattern&&u.pattern.test(t)?e.moduleAsyncRequire(e.rootModule,[u.module]).thenSync(function(e){return a.when(e.apply(this,r.concat(u.options))).thenSync(o)}):o(r[0])};return o(r[0])},y=function(e,n,t){return function(r){return e.call(n,t,r)}},function(){var e=v.split,n={},t=function(e){var t=e.config.packaging||n;this.config=t,this.baseUrl=(t.baseUrl||"").replace(/^%scriptdir%\//,m()),this.context=e,this.currentLoads={};var r=t.bootstrap;r&&r(e.define)},r=t.prototype={};r.moduleLoad=function(t){var r,i=t.filename,o=this.config.packagesMap;if(o){var u=e(i);r=h(o||n,u,null)}return r?this.loadPackaged(r):this.loadUnpackaged(t)},r.loadUnpackaged=function(e){return e.url=this.baseUrl+e.filename,l(e.url,this.config.requestConfig).thenSync(y(this.preprocessUnpackaged,this,e))},r.preprocessUnpackaged=function(e,n){var t=this.config.preprocessors;return t&&t.length?g(this.context,t,e.filename,[n,e.filename]).thenSync(y(this.defineUnpackaged,this,e)):this.defineUnpackaged(e,n)},r.defineUnpackaged=function(e,n){this.context.jsModuleDefine(n,e.filename,e.url)},r.loadPackaged=function(e){var n=this,t=n.baseUrl+e,r=n.currentLoads[t];return r||(n.currentLoads[t]=r=l(t,n.config.requestConfig).thenSync(function(e){var r=n.jsPackageEval(e,t);r(n.context.define)}).always(function(){delete n.currentLoads[t],n=null})),r},r.jsPackageEval=function(e,n){var t=["(function(define){\n",e,"\n})"];return d(t.join(""),n,1)},x=t}(),function(){var e=r.isString,n=v.split,t={},i=function(e){var n=e.length-1,t=e[n];-1==t.indexOf(".")&&(e[n]=t+".js")},o=function(e){for(var n=0,t=e.length;t>n;n++){var r=e[n];r.length&&"."!=r?".."==r&&n>0&&".."!=e[n-1]&&(e.splice(n-1,2),n-=2,t-=2):(e.splice(n,1),n--,t--)}return e},u=function(e,t,r){var i=n(t);i[0].length?i.unshift(r,1):(i.shift(),i.unshift(0,r+1)),e.splice.apply(e,i)},a=function(n,t){for(var r=0,i=t.length;i>r;r++){var o=t[r];if(n=n[o],!n||o===n)return!1;if(e(n))return u(t,n,r),!0}return u(t,n["."]||"index.js",t.length),!0},s=function(e,n){var t={},r=".";o(n);for(var i=n.join("/");i!==r;){if(".."==n[0])throw c("resolverRoot",[n]);if(t[i])throw c("resolverLoop",[n]);t[i]=r,a(e,n)&&o(n),r=i,i=n.join("/")}},l=function(e){this.config=e.config.resolver||t,this.cache={}},f=l.prototype={};f.moduleResolve=function(e,r){var o=n(e.filename),u=this.config["default"]||t,a=n(r),c=a[0];return("."===c||".."===c)&&(o.pop(),a=o.concat(a)),s(u,a),i(a),a.join("/")},j=l}(),function(){var n,t=function(){var n=e.document;if(!n||"complete"===n.readyState)return a.done;var t=a.defer(),r=function(){t&&t.resolve()};return n.addEventListener?(n.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1),t.promise.always(function(){n.removeEventListener("DOMContentLoaded",r,!1),e.removeEventListener("load",r,!1),n=null,r=null,t=null})):n.attachEvent&&(e.attachEvent("onload",r),t.promise.always(function(){e.detachEvent("onload",r),n=null,r=null,t=null})),t.promise};w=function(){return n||(n=t()),n}}(),function(){var n=function(e,n){return function(){return e.moduleExecute(n).end()}};M=function(t,r){return w().then(function(){var i=e.document,u=a.done;if(i){var s,c,l=i.getElementsByTagName("script");for(s=0,c=l.length;c>s;s++){var f=l[s];if(f.type===r){var d=f.getAttribute("data-filename");try{var h=t.jsModuleDefine(f.innerHTML,d);u=u.then(n(t,h))}catch(v){o(v)}}}}return u}).end()}}(),function(){var e=/(?=[\/'"]|\brequire\s*\()/,n=/^require\s*\(\s*$/,t=/[\r\n]/,r=/^['"]$/,i=/^(\w{2,}|[!%&\(*+,\-\/:;<=>?\[\^])$/,o=/^\s*(\S)/,u=/(\b(return|throw|new|in)|\S)\s*$/,a=/\s*\)\s*\.\s*([_$a-zA-Z][_$a-zA-Z0-9]*)\s*\(\s*/g,s=/[_$a-zA-Z][_$a-zA-Z0-9]*/g,c=/\s*(\)|,)\s*/g,l=function(e){for(var n=!1,t=e.length-1;t>=0&&"\\"==e.charAt(t);)t--,n=!n;return n},f=function(e,n){for(;n>=0;n--){var t=e[n];if(u.test(t))return RegExp.$1}return""},d=function(e,n){return 0===n||"."!=f(e,n-1)},h=function(e,n){return 0===n||i.test(f(e,n-1))},v=function(e,n){var t=e[n].charAt(0);n++;for(var r=e.length;r>n;n++){var i=e[n].charAt(0);if(i===t&&!l(e[n-1]))break}return n},p=function(e,n){for(var r=n+1,i=e.length;i>r;r++){var o=e[r],u=o.search(t);if(u>-1){e[r]=o.substring(u);break}}return e.splice(n,r-n),n},m=function(e,n){var t=n+1;"/*"==e[n]&&t++;for(var r=e[t-1],i=e.length;i>t;t++){var o=r;if(r=e[t],"*"==o.charAt(o.length-1)&&"/"==r.charAt(0)){e[t]=r.substring(1);break}}return e.splice(n,t-n),n},g=function(t){for(var i=[],u=[],a=0,s=t.split(e),c=s.length,l=-1;c>a&&a>=0;a++){var f=s[a],g=f.charAt(0);if("/"==g)"/"==f&&c>a+1&&"/"==s[a+1].charAt(0)?(a=p(s,a),c=s.length):"*"==f.charAt(1)?(a=m(s,a),c=s.length):h(s,a)&&(a=v(s,a));else if(r.test(g)){var y=a;a=v(s,a),i.push([y,a]),2==l&&(l=3)}else"r"==g&&n.test(f)&&d(s,a)&&(l=1);l>0&&(1==l?l=2:(f=s[a],3==l&&(f=f.substring(1),l=4),o.test(f)&&(4==l&&")"==RegExp.$1&&u.push(i.length-1),l=0)))}return[s,i,u]},y=function(e){for(var n=[0],t=1,r=e.length;r>=t;t++)n[t]=n[t-1]+e[t-1].length;return function(e){return[n[e[0]]+1,n[e[1]]]}},x=function(e,n){return e.substring.apply(e,n)},j=function(e,n,t){e.lastIndex=t;var r=e.exec(n);return r&&r.index==t?r:void 0},w=/(^|\/)\$[^\/]*$/;S=function(e,n){var t=g(e),r=t[2],i=r.length,o={},u=[];if(r.length)for(var l=y(t[0]),f=t[0].join(""),d=t[1],h=d.length,v=0;i>v;v++){var p=r[v],m=l(d[p]),M=x(f,m);if(o[M]||(u.push(M),o[M]=!0),n&&w.test(M)){var S=j(a,f,m[1]+1);if(S){var E=S[1],b=[],A=h>++p&&l(d[p]);do{var R=S.index+S[0].length;if(A&&R+1===A[0])b.push(x(f,A)),R=A[1]+1,A=h>++p&&l(d[p]);else{if(S=j(s,f,R),!S)break;R=s.lastIndex,b.push([S[0]])}S=j(c,f,R)}while(S&&","==S[1]);S&&u.push({module:M,method:E,args:b})}}}return u}}(),function(){var n=v.dirname,t=function(e,n){return function(){return e.apply(n,arguments)}},i=function(e,n){return function(){return e.moduleAsyncRequire(n,arguments)}},o=function(e,t){this.dirname=t?n(t):t=".",this._noder={},this.filename=t,this.id=t,this.require=y(e.moduleRequire,e,this),this.require.resolve=y(e.moduleResolve,e,this),this.require.cache=e.cache,this.parent=null,this.children=[],this.preloaded=!1,this.loaded=!1,this.exports={}},u=function(e,n){return e._noder[n]},s=function(e,n,t){return e._noder[n]=t,t},l=function(e){var n=e.config,t=a.done,r=n.main;t=t.thenSync(r?function(){return e.execModuleCall(r)}:a.empty),t=t.thenSync(n.onstart),"scriptsType"in n||(n.scriptsType=n.varName);var i=n.scriptsType;return i&&(t=t.thenSync(function(){return M(e,i)})),t.always(function(){e=null,n=null,t=null})},f=function(){},h=function(e,n,t){var r=e||n;return new r(t,n)},p=function(n){n=n||{},this.config=n,this.cache={},this.builtinModules=new f,this.when=n.failFast===!1?a.whenAll:a.when;var r=new o(this);r.preloaded=!0,r.loaded=!0,r.define=this.define=t(this.define,this),r.asyncRequire=i(this,r),r.execute=t(this.jsModuleExecute,this),r.createContext=p.createContext,this.rootModule=r,this.resolver=h(n.Resolver,j,this),this.loader=h(n.Loader,x,this);var u=n.varName;u&&(e[u]=r),l(this).end()},m=p.prototype={},g=function(e,n){if(n===e)return!0;var t=u(n,5);if(t)for(var r=0;t[r];r++)if(g(e,t[r]))return!0;return!1};m.modulePreload=function(e,n){if(e.preloaded)return a.done;var t=u(e,3),r=u(e,5);if(t||r){if(n){if(g(e,n))return a.done;r.push(n)}if(!t)throw c("modulePreloadRec",[e]);return t}var i=this;return n&&"."!=n.id?(e.parent=n,e.require.main=n.require.main,n.children.push(e)):e.require.main=e,s(e,5,n?[n]:[]),s(e,3,i.moduleLoadDefinition(e).thenSync(function(){return i.modulePreloadDependencies(e,u(e,1))}).thenSync(function(){e.preloaded=!0,s(e,3,!1),s(e,5,null)},function(n){throw c("modulePreload",[e],n)}).always(function(){e=null,i=null,n=null}))},m.moduleLoadDefinition=function(e){if(u(e,0))return a.done;var n=u(e,4);if(!n){var t=e.filename,r=this.builtinModules["/"+t];if(r)this.moduleDefine(e,[],r(this)),n=a.done;else{var i=!0,o=function(n){if(!u(e,0))throw c("moduleLoadDefinition",[e],n);i=!1};n=this.loader.moduleLoad(e).thenSync(o,o),i&&s(e,4,n)}}return n},m.moduleProcessPlugin=function(e,n){for(var t={module:e,__dirname:e.dirname,__filename:e.filename},i=n.args.slice(0),o=0,u=i.length;u>o;o++){var a=i[o];if(r.isArray(a)){if(a=a[0],!t.hasOwnProperty(a))return;i[o]=t[a]}}return this.moduleExecute(this.getModule(this.moduleResolve(e,n.module))).thenSync(function(e){var t=(e[n.method]||{}).$preload;return t?t.apply(e,i):void 0}).thenSync(null,function(t){throw c("moduleProcessPlugin",[e,n],t)})},m.modulePreloadDependencies=function(e,n){for(var t=[],i=0,o=n.length;o>i;i++){var u=n[i],a=r.isString(u)?this.modulePreload(this.getModule(this.moduleResolve(e,u)),e):this.moduleProcessPlugin(e,u);t.push(a)}return this.when(t)},m.moduleExecuteSync=function(n){if(n.loaded||u(n,2))return n.exports;var t=this.modulePreload(n);if(!t.isResolved())throw c("notPreloaded",[n],t.result());var r=n.exports;s(n,2,!0);try{return u(n,0).call(r,n,e),s(n,0,null),s(n,1,null),n.loaded=!0,n.exports}finally{s(n,2,!1)}},m.moduleResolve=function(e,n){return this.resolver.moduleResolve(e,n)},m.moduleRequire=function(e,n){return this.moduleExecuteSync(this.getModule(this.moduleResolve(e,n)))},m.getModule=function(e){if(!e)return new o(this);var n=this.cache[e];return n||(this.cache[e]=n=new o(this,e)),n},m.define=function(e,n,t){this.moduleDefine(this.getModule(e),n,t)},m.moduleDefine=function(e,n,t){return u(e,0)||(s(e,0,t),s(e,1,n),s(e,4,!1)),e},m.moduleExecute=function(e){var n=this;return n.modulePreload(e).thenSync(function(){return n.moduleExecuteSync(e)}).always(function(){n=null,e=null})},m.moduleAsyncRequire=function(e,n){return this.modulePreloadDependencies(e,n).thenSync(function(){for(var t=a.defer(),i=[],o=0,u=n.length;u>o;o++){var s=n[o];r.isString(s)&&(i[o]=e.require(s))}return t.resolve.apply(t,i),t.promise}).always(function(){e=null,n=null})},m.jsModuleDefine=function(e,n,t,r){var i=S(e,!0),o=this.jsModuleEval(e,t||n,r);return this.moduleDefine(this.getModule(n),i,o)},m.jsModuleExecute=function(e,n,t){return this.moduleExecute(this.jsModuleDefine(e,n,t))},m.jsModuleEval=function(e,n,t){var r=["(function(module, global){\nvar require = module.require, exports = module.exports, __filename = module.filename, __dirname = module.dirname;\n\n",e,"\n\n})"];return d(r.join(""),n,(t||0)+3)},m.execModuleCall=function(e){return this.moduleExecute(this.getModule(this.moduleResolve(this.rootModule,e)))},p.builtinModules=f.prototype={"/noder-js/asyncRequire.js":function(e){return function(n){n.exports={create:function(n){return i(e,n)}}}},"/noder-js/currentContext.js":function(e){return function(n){n.exports=e}}},m.Context=p,p.createContext=function(e){return new p(e).rootModule},p.expose=m.expose=function(e,n){var t=function(e){e.exports=n};this.builtinModules["/"+e]=function(){return t}},E=p}(),function(){var e=function(n,t,i){for(var o in t)if(t.hasOwnProperty(o)){var u,a=t[o];i&&r.isPlainObject(a)&&r.isPlainObject(u=n[o])?e(u,a,i):n[o]=a}};b=e}(),function(){var e={},n=p.src;if(n){var t=p.innerHTML;if(/^\s*$/.test(t||"")||(e=f(t)||e),!e.main){var r=n.indexOf("?");r>-1&&(e.main=decodeURIComponent(n.substring(r+1)))}}A=e}(),function(){var e=s().mainContext;b(e,A,!0),R=e}(),E.expose("noder-js/promise.js",a),E.expose("noder-js/context.js",E),E.expose("noder-js/findRequires.js",S),E.expose("noder-js/jsEval.js",d),E.expose("noder-js/request.js",l),E.expose("noder-js/asyncCall.js",u),P=E.createContext(R)})(function(){return this}(),function(){eval(arguments[0])},function(){return{mainContext:{varName:"noder"},errorContext:{main:"error.js",packaging:{baseUrl:"%scriptdir%/noderError/",requestConfig:{sync:!0}}}}});