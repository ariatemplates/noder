/*
 * Noder-js 1.3.0 - 21 May 2014
 * https://github.com/ariatemplates/noder-js
 * Copyright 2009-2014 Amadeus s.a.s.
 * Licensed under the Apache License, Version 2.0.
 */
!function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;return function(){var a=Object.prototype.toString,b=function(b){return"string"==typeof b||"[object String]"===a.call(b)},c=Array.isArray||function(b){return"[object Array]"===a.call(b)},e=function(a){return"function"==typeof a},f=function(b){return b?"[object Object]"===a.call(b):!1};d={isFunction:e,isArray:c,isString:b,isPlainObject:f}}(),function(){var b=a.setTimeout;e=function(a){b(a,0)}}(),f=function(a){e(function(){throw a.logDetails&&a.logDetails(),a})},function(){var a=[],b=!1,c=function(a,b,c){for(;a.length>0;){var d=a.shift();try{d.apply(c,b)}catch(e){f(e)}}},d=function(){b=!0;try{c(a,[])}finally{b=!1}},h=function(c){0!==a.length||b||e(d),a.push(c)};g={syncTick:d,nextTick:h,nextTickApply:function(a,b,d){a&&a.length>0&&h(function(){c(a,b,d)})},syncApply:c}}(),function(){var a=d.isFunction,b=Array.prototype.concat,c=function(){},e=function(b,c,d){if(b){var e=b.thenSync||b.then;if(a(e))return void e.call(b,c,d)}c(b)},i=function(a,b){return function(){try{var c=a.apply(null,arguments);e(c,b.resolve,b.reject)}catch(d){b.reject(d)}finally{a=null,b=null}}},j=function(){},k=function(){var b,c={},d=c.promise=new j,e=null,f={resolve:[],reject:[]},h=function(c,g){d["then"+c]=function(c,d){var h=k();return c=a(c)?i(c,h):h.resolve,d=a(d)?i(d,h):h.reject,f?(f.resolve.push(c),f.reject.push(d)):g(["resolve"==b?c:d],e),h.promise}};h("",g.nextTickApply),h("Sync",g.syncApply);var l=function(a){return c[a]=function(){if(f){e=arguments,b=a;var c=f[a];f=null,g.nextTickApply(c,e)}},function(){return b==a}};return d.isResolved=l("resolve"),d.isRejected=l("reject"),d.result=function(){return e&&e[0]},c};j.prototype={end:function(){return this.thenSync(c,f)},always:function(a){return this.then(a,a),this}};var l=k();l.resolve(),l=l.promise;var m=function(a,b){return function(c){return function(d){if(a){if(a[3]&&(c?a[2][b]=d:(a[3]=!1,a[2]=arguments,a[4]&&(a[1]=1))),a[1]--,!a[1]){var e=a[0],f=a[2];a[0]=a[2]=null,(a[3]?e.resolve:e.reject).apply(e,f)}a=null}}}},n=function(a){return function(){var c=b.apply([],arguments);if(!c.length)return l;for(var d=k(),f=[d,c.length,c,!0,a],g=0,h=c.length;h>g;g++){var i=m(f,g);e(c[g],i(!0),i(!1))}return d.promise}};h={defer:k,when:n(!0),whenAll:n(!1),empty:c,done:l}}(),i=c,function(){var a,b=0,c=function(){var a=!1,b=this,c=d().thenSync(function(c){return c.call(b,a)});return a=!0,c},d=function(){if(!a){var b=i().errorContext,c=new y(b);a=c.moduleExecute(c.getModule(b.main))}return a},e=function(a,d,e){var f=++b,g=new Error("NoderError #"+f+": "+a);return g.name="NoderError",g.id=f,g.code=a,g.args=d,g.cause=e,g.logDetails=c,g};j=e}(),function(){var b,c=a.XMLHttpRequest;c?b=function(){return new c}:(c=a.ActiveXObject,b=function(){return new c("Microsoft.XMLHTTP")});var d=function(a,b,c){return function(){if(b&&4==b.readyState){var d=200!=b.status;return d?c.reject(j("XMLHttpRequest",[a,b])):c.resolve(b.responseText,b),a=b=c=null,!0}}};k=function(a,c){c=c||{};var e=h.defer(),f=b(),g=c.headers||{};f.open(c.method||"GET",a,!c.sync);for(var i in g)g.hasOwnProperty(i)&&f.setRequestHeader(i,g[i]);f.send(c.data);var j=d(a,f,e);return j()||(f.onreadystatechange=j),e.promise}}(),l=function(a,c){var d={};return a=c?["/*\n * File: ",c,"\n */\narguments[1].res=",a,"\n//# sourceURL=",c].join(""):"arguments[1].res="+a,b(a,d),d.res},m=function(a,b,c,d){try{return l((c||"")+a+(d||""),b)}catch(e){throw j("jsEval",[a,b,c,d],e)}},function(){var a=d.isPlainObject;n=function(b,c,d){if(!b)return d;d=b["**"]||d;for(var e=0,f=c.length;f>e;e++){var g=c[e],h=b[g];if(!h)return b["*"]||b["**"]||d;if(!a(h))return h;d=b["**"]||d,b=h}return b["."]||b["*"]||b["**"]||d}}(),function(){var a=function(a){return a.length?a.split("/"):[]},b=function(b){var c=a(b);return c.pop(),c.join("/")};o={split:a,dirname:b}}(),function(){var b=a.document||{},c=function(){if("loading"==b.readyState||"interactive"==b.readyState){var a=b.getElementsByTagName("script");return a[a.length-1]}};p=b.currentScript||c()||{}}(),q=function(){var a=p.src;return a?o.dirname(a.replace(/\?.*$/,""))+"/":""},r=function(a,b,c,d){var e=(b||[]).slice(0),f=function(b){if(d[0]=b,!e.length)return h.when(b);var g=e.shift();return g.pattern&&g.pattern.test(c)?a.moduleAsyncRequire(a.rootModule,[g.module]).thenSync(function(a){return h.when(a.apply(this,d.concat(g.options))).thenSync(f)}):f(d[0])};return f(d[0])},s=function(a,b,c){return function(d){return a.call(b,c,d)}},function(){var a=o.split,b={},c=function(a){var c=a.config.packaging||b;this.config=c,this.baseUrl=(c.baseUrl||"").replace(/^%scriptdir%\//,q()),this.context=a,this.currentLoads={};var d=c.bootstrap;d&&d(a.define)},d=c.prototype={};d.moduleLoad=function(c){var d,e=c.filename,f=this.config.packagesMap;if(f){var g=a(e);d=n(f||b,g,null)}return d?this.loadPackaged(d):this.loadUnpackaged(c)},d.loadUnpackaged=function(a){return a.url=this.baseUrl+a.filename,k(a.url,this.config.requestConfig).thenSync(s(this.preprocessUnpackaged,this,a))},d.preprocessUnpackaged=function(a,b){var c=this.config.preprocessors;return c&&c.length?r(this.context,c,a.filename,[b,a.filename]).thenSync(s(this.defineUnpackaged,this,a)):this.defineUnpackaged(a,b)},d.defineUnpackaged=function(a,b){this.context.jsModuleDefine(b,a.filename,a.url)},d.loadPackaged=function(a){var b=this,c=b.baseUrl+a,d=b.currentLoads[c];return d||(b.currentLoads[c]=d=k(c,b.config.requestConfig).thenSync(function(a){var d=b.jsPackageEval(a,c);d(b.context.define)}).always(function(){delete b.currentLoads[c],b=null})),d},d.jsPackageEval=function(a,b){var c=["(function(define){\n",a,"\n})"];return m(c.join(""),b,1)},t=c}(),function(){var a=d.isString,b=o.split,c={},e=function(a){var b=a.length-1,c=a[b];-1==c.indexOf(".")&&(a[b]=c+".js")},f=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];d.length&&"."!=d?".."==d&&b>0&&".."!=a[b-1]&&(a.splice(b-1,2),b-=2,c-=2):(a.splice(b,1),b--,c--)}return a},g=function(a,c,d){var e=b(c);e[0].length?e.unshift(d,1):(e.shift(),e.unshift(0,d+1)),a.splice.apply(a,e)},h=function(b,c){for(var d=0,e=c.length;e>d;d++){var f=c[d];if(b=b[f],!b||f===b)return!1;if(a(b))return g(c,b,d),!0}return g(c,b["."]||"index.js",c.length),!0},i=function(a,b){var c={},d=".";f(b);for(var e=b.join("/");e!==d;){if(".."==b[0])throw j("resolverRoot",[b]);if(c[e])throw j("resolverLoop",[b]);c[e]=d,h(a,b)&&f(b),d=e,e=b.join("/")}},k=function(a){this.config=a.config.resolver||c,this.cache={}},l=k.prototype={};l.moduleResolve=function(a,d){var f=b(a.filename),g=this.config["default"]||c,h=b(d),j=h[0];return("."===j||".."===j)&&(f.pop(),h=f.concat(h)),i(g,h),e(h),h.join("/")},u=k}(),function(){var b,c=function(){var b=a.document;if(!b||"complete"===b.readyState)return h.done;var c=h.defer(),d=function(){c&&c.resolve()};return b.addEventListener?(b.addEventListener("DOMContentLoaded",d,!1),a.addEventListener("load",d,!1),c.promise.always(function(){b.removeEventListener("DOMContentLoaded",d,!1),a.removeEventListener("load",d,!1),b=null,d=null,c=null})):b.attachEvent&&(a.attachEvent("onload",d),c.promise.always(function(){a.detachEvent("onload",d),b=null,d=null,c=null})),c.promise};v=function(){return b||(b=c()),b}}(),function(){var b=function(a,b){return function(){return a.moduleExecute(b).end()}};w=function(c,d){return v().then(function(){var e=a.document,g=h.done;if(e){var i,j,k=e.getElementsByTagName("script");for(i=0,j=k.length;j>i;i++){var l=k[i];if(l.type===d){var m=l.getAttribute("data-filename");try{var n=c.jsModuleDefine(l.innerHTML,m);g=g.then(b(c,n))}catch(o){f(o)}}}}return g}).end()}}(),function(){var a=/(?=[\/'"]|\brequire\s*\()/,b=/^require\s*\(\s*$/,c=/[\r\n]/,d=/^['"]$/,e=/^(\w{2,}|[!%&\(*+,\-\/:;<=>?\[\^])$/,f=/^\s*(\S)/,g=/(\b(return|throw|new|in)|\S)\s*$/,h=/\s*\)\s*\.\s*([_$a-zA-Z][_$a-zA-Z0-9]*)\s*\(\s*/g,i=/[_$a-zA-Z][_$a-zA-Z0-9]*/g,j=/\s*(\)|,)\s*/g,k=function(a){for(var b=!1,c=a.length-1;c>=0&&"\\"==a.charAt(c);)c--,b=!b;return b},l=function(a,b){for(;b>=0;b--){var c=a[b];if(g.test(c))return RegExp.$1}return""},m=function(a,b){return 0===b||"."!=l(a,b-1)},n=function(a,b){return 0===b||e.test(l(a,b-1))},o=function(a,b){var c=a[b].charAt(0);b++;for(var d=a.length;d>b;b++){var e=a[b].charAt(0);if(e===c&&!k(a[b-1]))break}return b},p=function(a,b){for(var d=b+1,e=a.length;e>d;d++){var f=a[d],g=f.search(c);if(g>-1){a[d]=f.substring(g);break}}return a.splice(b,d-b),b},q=function(a,b){var c=b+1;"/*"==a[b]&&c++;for(var d=a[c-1],e=a.length;e>c;c++){var f=d;if(d=a[c],"*"==f.charAt(f.length-1)&&"/"==d.charAt(0)){a[c]=d.substring(1);break}}return a.splice(b,c-b),b},r=function(c){for(var e=[],g=[],h=0,i=c.split(a),j=i.length,k=-1;j>h&&h>=0;h++){var l=i[h],r=l.charAt(0);if("/"==r)"/"==l&&j>h+1&&"/"==i[h+1].charAt(0)?(h=p(i,h),j=i.length):"*"==l.charAt(1)?(h=q(i,h),j=i.length):n(i,h)&&(h=o(i,h));else if(d.test(r)){var s=h;h=o(i,h),e.push([s,h]),2==k&&(k=3)}else"r"==r&&b.test(l)&&m(i,h)&&(k=1);k>0&&(1==k?k=2:(l=i[h],3==k&&(l=l.substring(1),k=4),f.test(l)&&(4==k&&")"==RegExp.$1&&g.push(e.length-1),k=0)))}return[i,e,g]},s=function(a){for(var b=[0],c=1,d=a.length;d>=c;c++)b[c]=b[c-1]+a[c-1].length;return function(a){return[b[a[0]]+1,b[a[1]]]}},t=function(a,b){return a.substring.apply(a,b)},u=function(a,b,c){a.lastIndex=c;var d=a.exec(b);return d&&d.index==c?d:void 0},v=/(^|\/)\$[^\/]*$/;x=function(a,b){var c=r(a),d=c[2],e=d.length,f={},g=[];if(d.length)for(var k=s(c[0]),l=c[0].join(""),m=c[1],n=m.length,o=0;e>o;o++){var p=d[o],q=k(m[p]),w=t(l,q);if(f[w]||(g.push(w),f[w]=!0),b&&v.test(w)){var x=u(h,l,q[1]+1);if(x){var y=x[1],z=[],A=++p<n&&k(m[p]);do{var B=x.index+x[0].length;if(A&&B+1===A[0])z.push(t(l,A)),B=A[1]+1,A=++p<n&&k(m[p]);else{if(x=u(i,l,B),!x)break;B=i.lastIndex,z.push([x[0]])}x=u(j,l,B)}while(x&&","==x[1]);x&&g.push({module:w,method:y,args:z})}}}return g}}(),function(){var b=o.dirname,c=function(a,b){return function(){return a.apply(b,arguments)}},e=function(a){var b=function(c){var d=function(){return a.moduleAsyncRequire(c,arguments)};return d.create=b,d};return b},f=function(a,c){this.dirname=c?b(c):c=".",this._noder={},this.filename=c,this.id=c,this.require=s(a.moduleRequire,a,this),this.require.resolve=s(a.moduleResolve,a,this),this.require.cache=a.cache,this.parent=null,this.children=[],this.preloaded=!1,this.loaded=!1,this.exports={}},g=function(a,b){return a._noder[b]},i=function(a,b,c){return a._noder[b]=c,c},k=function(a){var b=a.config,c=h.done,d=b.main;c=c.thenSync(d?function(){return a.execModuleCall(d)}:h.empty),c=c.thenSync(b.onstart),"scriptsType"in b||(b.scriptsType=b.varName);var e=b.scriptsType;return e&&(c=c.thenSync(function(){return w(a,e)})),c.always(function(){a=null,b=null,c=null})},l=function(){},n=function(a,b,c){var d=a||b;return new d(c,b)},p=function(b){b=b||{},this.config=b,this.cache={},this.builtinModules=new l,this.when=b.failFast===!1?h.whenAll:h.when;var d=new f(this);d.preloaded=!0,d.loaded=!0,d.define=this.define=c(this.define,this),d.asyncRequire=e(this)(d),d.execute=c(this.jsModuleExecute,this),d.createContext=p.createContext,this.rootModule=d,this.resolver=n(b.Resolver,u,this),this.loader=n(b.Loader,t,this);var g=b.varName;g&&(a[g]=d),k(this).end()},q=p.prototype={},r=function(a,b){if(b===a)return!0;var c=g(b,5);if(c)for(var d=0;c[d];d++)if(r(a,c[d]))return!0;return!1};q.modulePreload=function(a,b){if(a.preloaded)return h.done;var c=g(a,3),d=g(a,5);if(c||d){if(b){if(r(a,b))return h.done;d.push(b)}if(!c)throw j("modulePreloadRec",[a]);return c}var e=this;return b&&"."!=b.id?(a.parent=b,a.require.main=b.require.main,b.children.push(a)):a.require.main=a,i(a,5,b?[b]:[]),i(a,3,e.moduleLoadDefinition(a).thenSync(function(){return e.modulePreloadDependencies(a,g(a,1))}).thenSync(function(){a.preloaded=!0,i(a,3,!1),i(a,5,null)},function(b){throw j("modulePreload",[a],b)}).always(function(){a=null,e=null,b=null}))},q.moduleLoadDefinition=function(a){if(g(a,0))return h.done;var b=g(a,4);if(!b){var c=a.filename,d=this.builtinModules["/"+c];if(d)this.moduleDefine(a,[],d(this)),b=h.done;else{var e=!0,f=function(b){if(!g(a,0))throw j("moduleLoadDefinition",[a],b);e=!1};b=this.loader.moduleLoad(a).thenSync(f,f),e&&i(a,4,b)}}return b},q.moduleProcessPlugin=function(a,b){for(var c={module:a,__dirname:a.dirname,__filename:a.filename},e=b.args.slice(0),f=0,g=e.length;g>f;f++){var h=e[f];if(d.isArray(h)){if(h=h[0],!c.hasOwnProperty(h))return;e[f]=c[h]}}return this.moduleExecute(this.getModule(this.moduleResolve(a,b.module))).thenSync(function(a){var c=(a[b.method]||{}).$preload;return c?c.apply(a,e):void 0}).thenSync(null,function(c){throw j("moduleProcessPlugin",[a,b],c)})},q.modulePreloadDependencies=function(a,b){for(var c=[],e=0,f=b.length;f>e;e++){var g=b[e],h=d.isString(g)?this.modulePreload(this.getModule(this.moduleResolve(a,g)),a):this.moduleProcessPlugin(a,g);c.push(h)}return this.when(c)},q.moduleExecuteSync=function(b){if(b.loaded||g(b,2))return b.exports;var c=this.modulePreload(b);if(!c.isResolved())throw j("notPreloaded",[b],c.result());var d=b.exports;i(b,2,!0);try{return g(b,0).call(d,b,a),i(b,0,null),i(b,1,null),b.loaded=!0,b.exports}finally{i(b,2,!1)}},q.moduleResolve=function(a,b){return this.resolver.moduleResolve(a,b)},q.moduleRequire=function(a,b){return this.moduleExecuteSync(this.getModule(this.moduleResolve(a,b)))},q.getModule=function(a){if(!a)return new f(this);var b=this.cache[a];return b||(this.cache[a]=b=new f(this,a)),b},q.define=function(a,b,c){this.moduleDefine(this.getModule(a),b,c)},q.moduleDefine=function(a,b,c){return g(a,0)||(i(a,0,c),i(a,1,b),i(a,4,!1)),a},q.moduleExecute=function(a){var b=this;return b.modulePreload(a).thenSync(function(){return b.moduleExecuteSync(a)}).always(function(){b=null,a=null})},q.moduleAsyncRequire=function(a,b){return this.modulePreloadDependencies(a,b).thenSync(function(){for(var c=h.defer(),e=[],f=0,g=b.length;g>f;f++){var i=b[f];d.isString(i)&&(e[f]=a.require(i))}return c.resolve.apply(c,e),c.promise}).always(function(){a=null,b=null})},q.jsModuleDefine=function(a,b,c){var d=x(a,!0),e=this.jsModuleEval(a,c||b);return this.moduleDefine(this.getModule(b),d,e)},q.jsModuleExecute=function(a,b,c){return this.moduleExecute(this.jsModuleDefine(a,b,c))},q.jsModuleEval=function(a,b){return m(a,b,"(function(module, global){\nvar require = module.require, exports = module.exports, __filename = module.filename, __dirname = module.dirname;\n\n","\n\n})")},q.execModuleCall=function(a){return this.moduleExecute(this.getModule(this.moduleResolve(this.rootModule,a)))},p.builtinModules=l.prototype={"/noder-js/asyncRequire.js":function(a){return function(b){b.exports=a.rootModule.asyncRequire}},"/noder-js/currentContext.js":function(a){return function(b){b.exports=a}}},q.Context=p,p.createContext=function(a){return new p(a).rootModule},p.expose=q.expose=function(a,b){var c=function(a){a.exports=b};this.builtinModules["/"+a]=function(){return c}},y=p}(),function(){var a=function(b,c,e){for(var f in c)if(c.hasOwnProperty(f)){var g,h=c[f];e&&d.isPlainObject(h)&&d.isPlainObject(g=b[f])?a(g,h,e):b[f]=h}};z=a}(),function(){var a={},b=p.src;if(b){var c=p.innerHTML;if(/^\s*$/.test(c||"")||(a=l(c)||a),!a.main){var d=b.indexOf("?");d>-1&&(a.main=decodeURIComponent(b.substring(d+1)))}}A=a}(),function(){var a=i().mainContext;z(a,A,!0),B=a}(),y.expose("noder-js/promise.js",h),y.expose("noder-js/context.js",y),y.expose("noder-js/findRequires.js",x),y.expose("noder-js/jsEval.js",m),y.expose("noder-js/request.js",k),y.expose("noder-js/asyncCall.js",g),C=y.createContext(B)}(function(){return this}(),function(){eval(arguments[0])},function(){return{mainContext:{varName:"noder"},errorContext:{main:"error.js",packaging:{baseUrl:"%scriptdir%/noderError/",requestConfig:{sync:!0}}}}});