/*
 * Noder-js 1.6.0 - 24 Jul 2014
 * https://github.com/ariatemplates/noder-js
 * Copyright 2009-2014 Amadeus s.a.s.
 * Licensed under the Apache License, Version 2.0.
 */
!function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return function(){var a=Object.prototype.toString,b=function(b){return"string"==typeof b||"[object String]"===a.call(b)},c=Array.isArray||function(b){return"[object Array]"===a.call(b)},e=function(a){return"function"==typeof a},f=function(a){return a&&"object"==typeof a},g=function(b){return b?"[object Object]"===a.call(b):!1};d={isFunction:e,isArray:c,isString:b,isObject:f,isPlainObject:g}}(),function(){var b=a.setTimeout;e=function(a){b(a,0)}}(),f=function(a){e(function(){throw a.logDetails&&a.logDetails(),a})},function(){var a=[],b=!1,c=function(a){try{a()}catch(b){f(b)}},d=function(a){for(;a.length>0;)c(a.shift())},h=function(){b=!0;try{d(a)}finally{b=!1}},i=function(c){0!==a.length||b||e(h),a.push(c)};g={syncTick:h,nextTick:i,nextTickCalls:function(a){a&&a.length>0&&i(function(){d(a)})},syncCalls:d,syncCall:c}}(),h=function(a,b,c){return function(d){return a.call(b,c,d)}},function(){var a=d.isFunction,b=d.isObject,c=function(a,b){var c,d=function(a,b){c||(c=!0,a(b))};return[h(d,null,function(c){return b&&c===b?void a[1](new TypeError):void e(c,a)}),h(d,null,a[1])]},e=function(d,e){try{if(a(d)||b(d)){var f=d.thenSync||d.then;if(a(f))return e=c(e),void f.call(d,e[0],e[1])}e[0](d)}catch(g){e[1](g)}},j=function(b){var d,e,f=this,i=[],k=function(b,c){f["then"+b]=function(b,g){return b=a(b)?b:null,g=a(g)?g:null,b||g?new j(function(a,f){var h=function(){var c=1==d?b:g;if(c)try{a(c(e))}catch(h){f(h)}else(1==d?a:f)(e)};i?i.push(h):c(h)}):f}};k("",g.nextTick),k("Sync",g.syncCall);var l=function(a){return d==a};f.isFulfilled=h(l,null,1),f.isRejected=h(l,null,2),f.result=function(){return e};var m=function(a,b){if(i){e=b,d=a;var c=i;i=null,g.nextTickCalls(c)}},n=[h(m,null,1),h(m,null,2)];n=c(n,f);try{b(n[0],n[1])}catch(o){n[1](o)}};j.resolve=function(a){return a instanceof j?a:new j(function(b){b(a)})},j.reject=function(a){return new j(function(b,c){c(a)})},j.defer=function(){var a={};return a.promise=new j(function(b,c){a.resolve=b,a.reject=c}),a},j.done=j.resolve();var k=j.prototype={},l=function(a,b){return a.apply(null,b)},m=function(a){var b="then"+a;k["spread"+a]=function(a,c){return this[b](h(l,null,a),c)},k["catch"+a]=function(a){return this[b](null,a)},k["finally"+a]=function(a){return this[b](a,a)},k["done"+a]=function(a,c){this[b](a,c).thenSync(null,f)}};m(""),m("Sync");var n=function(a){return function(b){return new j(function(c,d){if(0===b.length)return c([]);b=b.slice(0);for(var f=!0,g=b,i=b.length,j=function(e,h){b[this[0]]=h,f&&!e&&(f=!1,g=h,a&&(i=1)),i--,i||(f?c:d).call(null,g)},k=i-1;k>=0;k--){var l=[k];e(b[k],[h(j,l,!0),h(j,l,!1)])}})}};j.all=n(!0),j.allSettled=n(!1),i=j}(),j=c,function(){var a,b=0,c=function(){var a=!1,b=this,c=d().thenSync(function(c){return c(b,a)});return a=!0,c},d=function(){if(!a){var b=j().errorContext,c=new z(b);a=c.moduleExecute(c.getModule(b.main))}return a},e=function(a,d,e){var f=++b,g=new Error("NoderError #"+f+": "+a);return g.name="NoderError",g.id=f,g.code=a,g.args=d,g.cause=e,g.logDetails=c,g};k=e}(),function(){var b,c=a.XMLHttpRequest;c?b=function(){return new c}:(c=a.ActiveXObject,b=function(){return new c("Microsoft.XMLHTTP")});var d=function(a,b,c,d){return function(){if(b&&4==b.readyState){var e=200!=b.status;return e?d(k("XMLHttpRequest",[a,b])):c(b),a=b=c=d=null,!0}}};l=function(a,c){return new i(function(e,f){c=c||{};var g=b(),h=c.headers||{};g.open(c.method||"GET",a,!c.sync);for(var i in h)h.hasOwnProperty(i)&&g.setRequestHeader(i,h[i]);g.send(c.data);var j=d(a,g,e,f);j()||(g.onreadystatechange=j)})}}(),m=function(a,c){var d={};return a=c?["/*\n * File: ",c,"\n */\narguments[1].res=",a,"\n//# sourceURL=",c].join(""):"arguments[1].res="+a,b(a,d),d.res},n=function(a,b,c,d){try{return m((c||"")+a+(d||""),b)}catch(e){throw k("jsEval",[a,b,c,d],e)}},function(){var a=d.isPlainObject;o=function(b,c,d){if(!b)return d;d=b["**"]||d;for(var e=0,f=c.length;f>e;e++){var g=c[e],h=b[g];if(!h)return b["*"]||b["**"]||d;if(!a(h))return h;d=b["**"]||d,b=h}return b["."]||b["*"]||b["**"]||d}}(),function(){var a=function(a){return a.length?a.split("/"):[]},b=function(b){var c=a(b);return c.pop(),c.join("/")};p={split:a,dirname:b}}(),function(){var b=a.document||{},c=function(){if("loading"==b.readyState||"interactive"==b.readyState){var a=b.getElementsByTagName("script");return a[a.length-1]}};q=b.currentScript||c()||{}}(),r=function(){var a=q.src;return a?p.dirname(a.replace(/\?.*$/,""))+"/":""},s=function(a,b,c,d){var e=(b||[]).slice(0),f=function(b){if(d[0]=b,!e.length)return i.resolve(b);var g=e.shift();return g.pattern&&g.pattern.test(c)?a.moduleAsyncRequire(a.rootModule,[g.module]).spreadSync(function(a){return i.resolve(a.apply(null,d.concat(g.options))).thenSync(f)}):f(d[0])};return f(d[0])},function(){var a=function(b,c,e){for(var f in c)if(c.hasOwnProperty(f)){var g,h=c[f];e&&d.isPlainObject(h)&&d.isPlainObject(g=b[f])?a(g,h,e):b[f]=h}};t=a}(),function(){var a=p.split,b={},c=function(a){return a.responseText},d=function(a){var c=a.config.packaging||b;this.config=c,this.baseUrl=(c.baseUrl||"").replace(/^%scriptdir%\//,r()),this.context=a,this.currentLoads={};var d=c.bootstrap;d&&d(a.define)},e=d.prototype={};e.moduleLoad=function(c){var d,e=c.filename,f=this.config.packagesMap;if(f){var g=a(e);d=o(f||b,g,null)}return d?this.loadPackaged(d):this.loadUnpackaged(c)},e.loadUnpackaged=function(a){return a.url=this.baseUrl+a.filename,l(a.url,this.config.requestConfig).thenSync(c).thenSync(h(this.preprocessUnpackaged,this,a))},e.preprocessUnpackaged=function(a,b){var c=this.config.preprocessors;return c&&c.length?s(this.context,c,a.filename,[b,a.filename]).thenSync(h(this.defineUnpackaged,this,a)):this.defineUnpackaged(a,b)},e.defineUnpackaged=function(a,b){this.context.jsModuleDefine(b,a.filename,a.url)},e.loadPackaged=function(a){var b=this,d=b.baseUrl+a,e=b.currentLoads[d];return e||(b.currentLoads[d]=e=l(d,b.config.requestConfig).thenSync(c).thenSync(function(a){var c=b.jsPackageEval(a,d);c(b.context.define)})["finally"](function(){delete b.currentLoads[d],b=null})),e},e.jsPackageEval=function(a,b){return n(a,b,"(function(define){\n","\n})")},e.updatePackagesMap=function(a){var b=this.config;b.packagesMap?t(b.packagesMap,a,!0):b.packagesMap=a},u=d}(),function(){var a=d.isString,b=p.split,c={},e=function(a){var b=a.length-1,c=a[b];-1==c.indexOf(".")&&(a[b]=c+".js")},f=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];d.length&&"."!=d?".."==d&&b>0&&".."!=a[b-1]&&(a.splice(b-1,2),b-=2,c-=2):(a.splice(b,1),b--,c--)}return a},g=function(a,c,d){var e=b(c);e[0].length?e.unshift(d,1):(e.shift(),e.unshift(0,d+1)),a.splice.apply(a,e)},h=function(b,c){for(var d=0,e=c.length;e>d;d++){var f=c[d];if(b=b[f],!b||f===b)return!1;if(a(b))return g(c,b,d),!0}return g(c,b["."]||"index.js",c.length),!0},i=function(a,b){var c={},d=".";f(b);for(var e=b.join("/");e!==d;){if(".."==b[0])throw k("resolverRoot",[b]);if(c[e])throw k("resolverLoop",[b]);c[e]=d,h(a,b)&&f(b),d=e,e=b.join("/")}},j=function(a){this.config=a.config.resolver||c,this.cache={}},l=j.prototype={};l.moduleResolve=function(a,d){var f=b(a.filename),g=this.config["default"]||c,h=b(d),j=h[0];return("."===j||".."===j)&&(f.pop(),h=f.concat(h)),i(g,h),e(h),h.join("/")},v=j}(),function(){var b,c=function(){return new i(function(b){var c=a.document;if(!c||"complete"===c.readyState)return b();var d,e=function(){b(),d(),c=d=e=null};c.addEventListener?(d=function(){c.removeEventListener("DOMContentLoaded",e,!1),a.removeEventListener("load",e,!1)},c.addEventListener("DOMContentLoaded",e,!1),a.addEventListener("load",e,!1)):c.attachEvent&&(d=function(){a.detachEvent("onload",e)},a.attachEvent("onload",e))})};w=function(){return b||(b=c()),b}}(),function(){var b=function(a){return a.thenSync(function(){},f)};x=function(c,d){return b(w().then(function(){var e=a.document,g=i.done;if(e){var j,k,l=e.getElementsByTagName("script");for(j=0,k=l.length;k>j;j++){var m=l[j];if(m.type===d){var n=m.getAttribute("data-filename");try{var o=c.jsModuleDefine(m.innerHTML,n);g=b(g.then(h(c.moduleExecute,c,o)))}catch(p){f(p)}}}}return g}))}}(),function(){var a=/(?=[\/'"]|\brequire\s*\()/,b=/^require\s*\(\s*$/,c=/[\r\n]/,d=/^['"]$/,e=/^(\w{2,}|[!%&\(*+,\-\/:;<=>?\[\^])$/,f=/^\s*(\S)/,g=/(\b(return|throw|new|in)|\S)\s*$/,h=/\s*\)\s*\.\s*([_$a-zA-Z][_$a-zA-Z0-9]*)\s*\(\s*(?=(.?))/g,i=/[_$a-zA-Z][_$a-zA-Z0-9]*/g,j=/\s*(\)|,)\s*/g,k=function(a){for(var b=!1,c=a.length-1;c>=0&&"\\"==a.charAt(c);)c--,b=!b;return b},l=function(a,b){for(;b>=0;b--){var c=a[b];if(g.test(c))return RegExp.$1}return""},m=function(a,b){return 0===b||"."!=l(a,b-1)},n=function(a,b){return 0===b||e.test(l(a,b-1))},o=function(a,b){var c=a[b].charAt(0);b++;for(var d=a.length;d>b;b++){var e=a[b].charAt(0);if(e===c&&!k(a[b-1]))break}return b},p=function(a,b){for(var d=b+1,e=a.length;e>d;d++){var f=a[d],g=f.search(c);if(g>-1){a[d]=f.substring(g);break}}return a.splice(b,d-b),b},q=function(a,b){var c=b+1;"/*"==a[b]&&c++;for(var d=a[c-1],e=a.length;e>c;c++){var f=d;if(d=a[c],"*"==f.charAt(f.length-1)&&"/"==d.charAt(0)){a[c]=d.substring(1);break}}return a.splice(b,c-b),b},r=function(c){for(var e=[],g=[],h=0,i=c.split(a),j=i.length,k=-1;j>h&&h>=0;h++){var l=i[h],r=l.charAt(0);if("/"==r)"/"==l&&j>h+1&&"/"==i[h+1].charAt(0)?(h=p(i,h),j=i.length):"*"==l.charAt(1)?(h=q(i,h),j=i.length):n(i,h)&&(h=o(i,h));else if(d.test(r)){var s=h;h=o(i,h),e.push([s,h]),2==k&&(k=3)}else"r"==r&&b.test(l)&&m(i,h)&&(k=1);k>0&&(1==k?k=2:(l=i[h],3==k&&(l=l.substring(1),k=4),f.test(l)&&(4==k&&")"==RegExp.$1&&g.push(e.length-1),k=0)))}return[i,e,g]},s=function(a){for(var b=[0],c=1,d=a.length;d>=c;c++)b[c]=b[c-1]+a[c-1].length;return function(a){return[b[a[0]]+1,b[a[1]]]}},t=function(a,b){return a.substring.apply(a,b)},u=function(a,b,c){a.lastIndex=c;var d=a.exec(b);return d&&d.index==c?d:void 0},v=/(^|\/)\$[^\/]*$/;y=function(a,b){var c=r(a),d=c[2],e=d.length,f={},g=[];if(d.length)for(var k=s(c[0]),l=c[0].join(""),m=c[1],n=m.length,o=0;e>o;o++){var p=d[o],q=k(m[p]),w=t(l,q);if(f[w]||(g.push(w),f[w]=!0),b&&v.test(w)){var x=u(h,l,q[1]+1);if(x){var y=x[1],z=[],A=++p<n&&k(m[p]);for(x[1]=x[2];x&&")"!=x[1];){var B=x.index+x[0].length;if(A&&B+1===A[0])z.push(t(l,A)),B=A[1]+1,A=++p<n&&k(m[p]);else{if(x=u(i,l,B),!x)break;B=i.lastIndex,z.push([x[0]])}x=u(j,l,B)}x&&g.push({module:w,method:y,args:z})}}}return g}}(),function(){var b=p.dirname,c=function(a,b){return function(){return a.apply(b,arguments)}},e=function(a){var b=function(c){var d=function(){return a.moduleAsyncRequire(c,arguments)};return d.create=b,d};return b},f=function(a,c){this.dirname=c?b(c):c=".",this._noder={},this.filename=c,this.id=c,this.require=h(a.moduleRequire,a,this),this.require.resolve=h(a.moduleResolve,a,this),this.require.cache=a.cache,this.require.main=a.main,this.preloaded=!1,this.loaded=!1,this.exports={}},g=function(a,b){return a._noder[b]},j=function(a,b,c){return a._noder[b]=c,c},l=function(a){var b=a.config,c=i.done,d=b.main;c=c.thenSync(d?function(){var b=a.main=a.execModuleCall(d);return b}:function(){}),c=c.thenSync(b.onstart);var e=b.scriptsType;return e&&(c=c.thenSync(function(){return x(a,e)})),c},m=function(){},o=function(a,b,c){var d=a||b;return new d(c,b)},q=function(b){b=b||{},this.config=b,this.cache={},this.builtinModules=new m,this.allSettled=b.failFast===!1?i.allSettled:i.all;var d=new f(this);d.preloaded=!0,d.loaded=!0,d.define=this.define=c(this.define,this),d.asyncRequire=e(this)(d),d.execute=c(this.jsModuleExecute,this),d.createContext=q.createContext,this.rootModule=d,this.resolver=o(b.Resolver,v,this),this.loader=o(b.Loader,u,this),d.updatePackagesMap=c(this.loader.updatePackagesMap,this.loader);var g=b.varName;g&&(a[g]=d),l(this).done()},r=q.prototype={},s=function(a,b){if(b===a)return!0;var c=g(b,5);if(c)for(var d=0;c[d];d++)if(s(a,c[d]))return!0;return!1};r.modulePreload=function(a,b){if(a.preloaded)return i.done;var c=g(a,3),d=g(a,5);if(c||d){if(b){if(s(a,b))return i.done;d.push(b)}if(!c)throw k("modulePreloadRec",[a]);return c}var e=this;return j(a,5,b?[b]:[]),j(a,3,e.moduleLoadDefinition(a).thenSync(function(){return e.modulePreloadDependencies(a,g(a,1))}).thenSync(function(){a.preloaded=!0,j(a,3,!1),j(a,5,null)},function(b){throw k("modulePreload",[a],b)}))},r.moduleLoadDefinition=function(a){if(g(a,0))return i.done;var b=g(a,4);if(!b){var c=a.filename,d=this.builtinModules["/"+c];if(d)this.moduleDefine(a,[],d(this)),b=i.done;else{var e=!0,f=function(b){if(!g(a,0))throw k("moduleLoadDefinition",[a],b);e=!1};b=this.loader.moduleLoad(a).thenSync(f,f),e&&j(a,4,b)}}return b},r.moduleProcessPlugin=function(a,b){for(var c={module:a,__dirname:a.dirname,__filename:a.filename,"null":null},e=b.args.slice(0),f=0,g=e.length;g>f;f++){var h=e[f];if(d.isArray(h)){if(h=h[0],!c.hasOwnProperty(h))return;e[f]=c[h]}}return this.moduleExecute(this.getModule(this.moduleResolve(a,b.module))).thenSync(function(a){var c=(a[b.method]||{}).$preload;return c?c.apply(a,e):void 0}).thenSync(null,function(c){throw k("moduleProcessPlugin",[a,b],c)})},r.modulePreloadDependencies=function(a,b){for(var c=[],e=0,f=b.length;f>e;e++){var g=b[e],h=d.isString(g)?this.modulePreload(this.getModule(this.moduleResolve(a,g)),a):this.moduleProcessPlugin(a,g);c.push(h)}return this.allSettled(c)},r.moduleExecuteSync=function(b){if(b.loaded||g(b,2))return b.exports;var c=this.modulePreload(b);if(!c.isFulfilled())throw k("notPreloaded",[b],c.result());var d=b.exports;j(b,2,!0);try{return g(b,0).call(d,b,a),j(b,0,null),j(b,1,null),b.loaded=!0,b.exports}finally{j(b,2,!1)}},r.moduleResolve=function(a,b){return this.resolver.moduleResolve(a,b)},r.moduleRequire=function(a,b){return this.moduleExecuteSync(this.getModule(this.moduleResolve(a,b)))},r.getModule=function(a){if(!a)return new f(this);var b=this.cache[a];return b||(this.cache[a]=b=new f(this,a)),b},r.define=function(a,b,c){this.moduleDefine(this.getModule(a),b,c)},r.moduleDefine=function(a,b,c){return g(a,0)||(j(a,0,c),j(a,1,b),j(a,4,!1)),a},r.moduleExecute=function(a){var b=this;return b.modulePreload(a).thenSync(function(){return b.moduleExecuteSync(a)})},r.moduleAsyncRequire=function(a,b){return this.modulePreloadDependencies(a,b).thenSync(function(){for(var c=[],e=0,f=b.length;f>e;e++){var g=b[e];d.isString(g)&&(c[e]=a.require(g))}return c})},r.jsModuleDefine=function(a,b,c){var d=y(a,!0),e=this.jsModuleEval(a,c||b);return this.moduleDefine(this.getModule(b),d,e)},r.jsModuleExecute=function(a,b,c){return this.moduleExecute(this.jsModuleDefine(a,b,c))},r.jsModuleEval=function(a,b){return n(a,b,"(function(module, global){\nvar require = module.require, exports = module.exports, __filename = module.filename, __dirname = module.dirname;\n\n","\n\n})")},r.execModuleCall=function(a){return this.moduleExecute(this.getModule(this.moduleResolve(this.rootModule,a)))},q.builtinModules=m.prototype={"/noder-js/asyncRequire.js":function(a){return function(b){b.exports=a.rootModule.asyncRequire}},"/noder-js/currentContext.js":function(a){return function(b){b.exports=a}}},r.Context=q,q.createContext=function(a){return new q(a).rootModule},q.expose=r.expose=function(a,b){var c=function(a){a.exports=b};this.builtinModules["/"+a]=function(){return c}},z=q}(),function(){var a=j().mainContext,b=q.src;if(b){var c=q.innerHTML;if(!/^\s*$/.test(c||"")){var d=m(c);t(a,d,!0)}if(!a.main){var e=b.indexOf("?");e>-1&&(a.main=decodeURIComponent(b.substring(e+1)))}}A=a}(),z.expose("noder-js/promise.js",i),z.expose("noder-js/context.js",z),z.expose("noder-js/findRequires.js",y),z.expose("noder-js/jsEval.js",n),z.expose("noder-js/request.js",l),z.expose("noder-js/asyncCall.js",g),B=z.createContext(A)}(function(){return this}(),function(){eval(arguments[0])},function(){return{mainContext:{varName:"noder",scriptsType:"application/x-noder"},errorContext:{main:"error.js",packaging:{baseUrl:"%scriptdir%/noderError/",requestConfig:{sync:!0}}}}});